<template lang="pug">
  div.slide(
    v-if="content",
  )
    div(
      :class="className('slide__media')"
    )
      media-images(
        v-if="content.media[0].images",
        :images="content.media[0].images",
      )
      media-publication(
        v-if="content.media[0].publication",
        :publication="content.media[0].publication[0]",
      )
    div.slide__caption(
      v-html="caption",
    )
</template>

<script>
import marked from 'marked';
import MediaImages from './MediaImages.vue';
import MediaPublication from './MediaPublication.vue';

export default {
  components: {
    MediaImages,
    MediaPublication,
  },

  props: {
    content: {
      caption: String,
      media: Array,
    }
  },

  computed: {
    /**
     * Returns caption text with Markdown formatting applied.
     * @return {string}
     */
    caption() {
      return marked(this.content.caption);
    }
  },

  methods: {
    /**
     * @param {!string} name - Base classname for the element.
     * @return {string}
     */
    className(name) {
      return (this.content.media[0].images && this.content.media[0].images.length > 1)
          ? `${name} ${name}--multiple` : name;
    },
  }
}
</script>
